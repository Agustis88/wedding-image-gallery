@using WeddingImageGallery.Shared
@inject NavigationManager NavManager
@inject HttpClient Http

<ul class="nav nav-tabs gallery-tabs">
	@foreach (var gallery in galleries)
	{
		<li class="nav-item">
			<NavLink class="nav-link" href="@gallery.Path">
				@gallery.Name
			</NavLink>
		</li>
	}
</ul>

@code {

    [CascadingParameter]
    LanguageContext LanguageContext { get; set; }

	private Gallery[] galleries = new Gallery[0];
	private Gallery currentGallery = null;

	private void SetCurrentGallery(Gallery gallery)
	{
		currentGallery = gallery;
	}

	protected override async Task OnInitializedAsync()
	{
		galleries = await Http.GetFromJsonAsync<Gallery[]>("api/galleries?language=" + LanguageContext.Language);
		if (galleries.Any())
		{
			NavManager.NavigateTo(galleries.First().Path);
		}
	}

}